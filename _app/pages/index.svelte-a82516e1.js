import{S as e,i as a,s as t,e as s,t as i,k as n,c,a as o,g as r,d as h,n as d,b as u,f as p,F as l,H as g,G as f,I as m,J as v,K as w,L as b}from"../chunks/vendor-4d83dcfd.js";import{b as k}from"../chunks/paths-7dc55c62.js";import{s as I,g as T}from"../chunks/stores-30a9c379.js";function y(e){let a,t,v,w,b,k,I,T,y,E,N,j,U,q,x;return{c(){a=s("main"),t=s("button"),v=i("apri immagine"),w=n(),b=s("button"),k=i("apri video"),I=n(),T=s("input"),y=n(),E=s("input"),N=n(),j=s("canvas"),U=i("This app requires JS"),this.h()},l(e){a=c(e,"MAIN",{});var s=o(a);t=c(s,"BUTTON",{class:!0});var i=o(t);v=r(i,"apri immagine"),i.forEach(h),w=d(s),b=c(s,"BUTTON",{class:!0});var n=o(b);k=r(n,"apri video"),n.forEach(h),I=d(s),T=c(s,"INPUT",{hidden:!0,type:!0,accept:!0}),y=d(s),E=c(s,"INPUT",{hidden:!0,type:!0,accept:!0}),s.forEach(h),N=d(e),j=c(e,"CANVAS",{hidden:!0});var u=o(j);U=r(u,"This app requires JS"),u.forEach(h),this.h()},h(){u(t,"class","btn svelte-1esaq0t"),u(b,"class","btn svelte-1esaq0t"),T.hidden=!0,u(T,"type","file"),u(T,"accept","image/*"),E.hidden=!0,u(E,"type","file"),u(E,"accept","video/*"),j.hidden=!0},m(s,i){p(s,a,i),l(a,t),l(t,v),l(a,w),l(a,b),l(b,k),l(a,I),l(a,T),e[6](T),l(a,y),l(a,E),e[8](E),p(s,N,i),p(s,j,i),l(j,U),e[10](j),q||(x=[g(t,"click",e[4]),g(b,"click",e[5]),g(T,"change",e[7]),g(E,"change",e[9])],q=!0)},p:f,i:f,o:f,d(t){t&&h(a),e[6](null),e[8](null),t&&h(N),t&&h(j),e[10](null),q=!1,m(x)}}}function E(e,a,t){let s,i,n,c;function o(e,a){const s=e[0],i=new FileReader;i.onload=e=>function(e,a,s){switch(a){case"image":const a=new Image;a.onload=e=>{t(2,c.width=a.width,c),t(2,c.height=a.height,c);const i=c.getContext("2d");i.drawImage(a,0,0);r(i.getImageData(0,0,c.width,c.height),s)},a.src=e;break;case"video":const i=document.createElement("video");i.volume=0,i.oncanplay=e=>{t(2,c.width=i.videoWidth,c),t(2,c.height=i.videoHeight,c);const a=c.getContext("2d");a.drawImage(i,0,0);r(a.getImageData(0,0,c.width,c.height),s)},i.src=e;break;default:throw new ReferenceError("Input type not supported")}}(e.target.result,a,s.name),i.readAsDataURL(s)}function r(e,a){w(I,s=Object.assign(Object.assign({},I),{imgData:e,name:a}),s),T(`${k}/perspective`)}v(e,I,(e=>t(11,s=e)));return[i,n,c,o,()=>i.click(),()=>n.click(),function(e){b[e?"unshift":"push"]((()=>{i=e,t(0,i)}))},()=>o(i.files,"image"),function(e){b[e?"unshift":"push"]((()=>{n=e,t(1,n)}))},()=>o(n.files,"video"),function(e){b[e?"unshift":"push"]((()=>{c=e,t(2,c)}))}]}export default class extends e{constructor(e){super(),a(this,e,E,y,t,{})}}
